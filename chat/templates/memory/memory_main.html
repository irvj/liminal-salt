<!-- Header -->
<header class="header">
    <h1>ğŸ“ User Memory</h1>
    <div class="subtitle">Model: {{ model }}</div>
</header>

<!-- Memory Content -->
<div class="memory-area">
    {% if error %}
    <div class="alert alert-error">âš ï¸ {{ error }}</div>
    {% endif %}

    <div class="memory-buttons">
        <form hx-post="{% url 'update_memory' %}"
              hx-target="#main-content"
              hx-swap="innerHTML"
              hx-on::before-request="showMemoryUpdating()">
            {% csrf_token %}
            <button type="submit" class="button-primary" id="update-memory-btn">Update User Memory</button>
        </form>

        <button onclick="openWipeMemoryModal()" class="button-danger">Wipe Memory</button>
    </div>

    <div class="memory-timestamp">
        {% if last_update %}Last updated: {{ last_update|date:"M d, Y" }} at {{ last_update|time:"g:i A" }}{% else %}Never updated from all sessions{% endif %}<span id="memory-status" {% if not just_updated %}style="display: none;"{% endif %}> Â· {% if just_updated %}âœ… {{ success }}{% else %}Updating memory from all sessions<span class="updating-dots"><span>.</span><span>.</span><span>.</span></span>{% endif %}</span>
    </div>

    <div class="memory-content-box">
        {% if memory_content %}
            {{ memory_content|linebreaks }}
        {% else %}
            <div class="empty-state">
                <strong>No long-term memory found yet.</strong><br>
                Memory will be created after your first update.
            </div>
        {% endif %}
    </div>
</div>
